import{$ as Te,A as xe,M as Se,N as ke,O as Fe,P as Me,Q as Ie,S as A,U as O,W as q,X as Pe,Y as D,_ as H,a as ge,b as _,c as he,d as be,e as M,ea as Ne,f,g as I,h as P,k as T,m as N,n as j,o as Ce,s as V,t as _e,v as ve,w as ye,y as Ee,z as we}from"./chunk-IJE6XXDP.js";import{a as de,h as ue,i as y,j as fe,k as K}from"./chunk-2I5PCLPG.js";import{Ab as B,Db as d,Fb as $,Jc as z,Kc as se,Nc as pe,Ob as Z,Pa as ae,Pb as l,Pc as ce,Qb as b,R as ne,Rb as R,Sa as m,Sb as le,Ta as u,V as ie,W as U,Zb as me,_ as oe,da as g,ea as G,j as x,kb as C,la as k,ma as F,mb as p,ub as n,vb as t,wb as s,y as S}from"./chunk-X7G7GHZB.js";import"./chunk-ODN5LVDJ.js";var He=()=>({width:"250px"});function We(i,e){if(i&1){let h=B();n(0,"mat-list-item",11),d("click",function(){k(h),$();let r=Z(2);return F(r.toggle())}),n(1,"mat-icon",12),l(2),t(),l(3),t()}if(i&2){let h=e.$implicit;p("routerLink",h.url),m(2),b(h.icon),m(),R(" ",h.label," ")}}var je=(()=>{let e=class e{constructor(){this.sidebarItems=[{label:"registro",icon:"add",url:"./registro"},{label:"cerrar session",icon:"logout",url:"/auth/"}]}openUserMenu(){console.log("User icon clicked")}openHelp(){console.log("Help icon clicked")}openNotifications(){console.log("Notifications icon clicked")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=g({type:e,selectors:[["app-layoutpage"]],decls:21,vars:3,consts:[["sidenav",""],["fullscreen","",2,"background-color","#f0f0f0"],["mode","side",2,"background-color","#52866f","border-radius","0",3,"ngStyle"],["color","primary",2,"background-color","#4d8571"],[3,"routerLink","click",4,"ngFor","ngForOf"],["color","primary",2,"background-color","#4d7f65"],["mat-icon-button","",3,"click"],[1,"spacer"],["mat-icon-button","","routerLink","./perfil",3,"click"],[1,"spacer",2,"flex","1"],[1,"container"],[3,"click","routerLink"],["matListItemIcon",""]],template:function(r,a){if(r&1){let c=B();n(0,"mat-sidenav-container",1)(1,"mat-sidenav",2,0)(3,"mat-toolbar",3)(4,"span"),l(5,"Men\xFA"),t()(),n(6,"mat-nav-list"),C(7,We,4,3,"mat-list-item",4),t()(),n(8,"mat-toolbar",5)(9,"button",6),d("click",function(){k(c);let w=Z(2);return F(w.toggle())}),n(10,"mat-icon"),l(11,"menu"),t()(),s(12,"span",7),n(13,"button",8),d("click",function(){return k(c),F(a.openUserMenu())}),n(14,"mat-icon"),l(15,"account_circle"),t()(),n(16,"span"),l(17,"Usuario"),t(),s(18,"span",9),t(),n(19,"div",10),s(20,"router-outlet"),t()()}r&2&&(m(),p("ngStyle",me(2,He)),m(6),p("ngForOf",a.sidebarItems))},dependencies:[z,pe,ue,fe,he,be,ye,ve,_e,Ee,we,xe]});let i=e;return i})();var Ve=(()=>{let e=class e{constructor(o){this.httpClient=o,this.baseUrl=Se.baseUrl}addTrabajador(o){return this.httpClient.post(`${this.baseUrl}/trabajadores`,o).pipe(ne(r=>console.log("Respuesta del backend:",r)),S(r=>(console.error("Error al agregar trabajador:",r),x(void 0))))}getTrabajadores(){return this.httpClient.get(`${this.baseUrl}/trabajadores`).pipe(S(o=>(console.error("Error al obtener trabajadores:",o),x([]))))}getTrabajador(o){return this.httpClient.get(`${this.baseUrl}/trabajadores/${o}`).pipe(S(r=>(console.error("Error al obtener trabajador:",r),x(void 0))))}updateTrabajador(o,r){return this.httpClient.put(`${this.baseUrl}/trabajadores/${o}`,r).pipe(S(a=>(console.error("Error al actualizar trabajador:",a),x(void 0))))}deleteTrabajador(o){return this.httpClient.delete(`${this.baseUrl}/trabajadores/${o}`).pipe(S(r=>(console.error("Error al eliminar trabajador:",r),x(void 0))))}};e.\u0275fac=function(r){return new(r||e)(oe(de))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function Ze(i,e){if(i&1&&(n(0,"mat-option",15),l(1),t()),i&2){let h=e.$implicit;p("value",h),m(),le(" ",h.Nombre," - ",h.Departamento," ")}}function Ke(i,e){i&1&&(n(0,"mat-error"),l(1," El nombre completo es requerido. "),t())}function Qe(i,e){i&1&&(n(0,"mat-error"),l(1," Solo se permiten letras y espacios. "),t())}function Xe(i,e){i&1&&(n(0,"mat-error"),l(1," El correo electr\xF3nico es requerido. "),t())}function Ye(i,e){i&1&&(n(0,"mat-error"),l(1," Debe ser un correo electr\xF3nico v\xE1lido. "),t())}function et(i,e){i&1&&(n(0,"mat-error"),l(1," La contrase\xF1a es requerida. "),t())}function tt(i,e){i&1&&(n(0,"mat-error"),l(1," La contrase\xF1a debe tener al menos una letra may\xFAscula, una letra min\xFAscula, un n\xFAmero y un car\xE1cter especial. "),t())}function rt(i,e){i&1&&(n(0,"mat-error"),l(1," El departamento es requerido. "),t())}function nt(i,e){i&1&&(n(0,"mat-error"),l(1," Solo se permiten letras y espacios. "),t())}function it(i,e){i&1&&(n(0,"mat-error"),l(1," El puesto es requerido. "),t())}function ot(i,e){i&1&&(n(0,"mat-error"),l(1," Solo se permiten letras y espacios. "),t())}function at(i,e){if(i&1){let h=B();n(0,"button",16),d("click",function(){k(h);let r=$();return F(r.onDelete())}),l(1," Eliminar "),t()}}var Be=(()=>{let e=class e{constructor(o,r,a){this.fb=o,this.empleadosService=r,this.snackBar=a,this.selectedEmployee=null,this.workers=[],this.workerForm=this.fb.group({employeeId:[""],fullName:["",[f.required,this.lettersAndSpacesValidator]],email:["",[f.required,f.email]],Contrasena:["",[f.required,f.minLength(8),this.passwordValidator]],department:["",[f.required,this.lettersAndSpacesValidator]],position:["",[f.required,this.lettersAndSpacesValidator]]})}ngOnInit(){this.getWorkers()}getWorkers(){this.empleadosService.getTrabajadores().subscribe(o=>{this.workers=o},o=>{console.error("Error al obtener trabajadores:",o),this.snackBar.open("Error al obtener trabajadores.","Cerrar",{duration:3e3,panelClass:["error-snackbar"]})})}onWorkerSelect(o){this.selectedEmployee=o.value,this.workerForm.patchValue({employeeId:this.selectedEmployee.idEmpleado,fullName:this.selectedEmployee.Nombre,Contrasena:this.selectedEmployee.Contrasena,email:this.selectedEmployee.CorreoElectronico,department:this.selectedEmployee.Departamento,position:this.selectedEmployee.Cargo})}onSubmit(){if(this.workerForm.valid){let o=this.workerForm.value,r={idEmpleado:o.employeeId,Nombre:o.fullName,CorreoElectronico:o.email,Contrasena:o.Contrasena,Departamento:o.department,Cargo:o.position,idUsuario:0};this.selectedEmployee?this.empleadosService.updateTrabajador(this.selectedEmployee.idEmpleado,r).subscribe(a=>{this.snackBar.open("Empleado actualizado exitosamente.","Cerrar",{duration:3e3,panelClass:["success-snackbar"]}),this.resetForm()},a=>{console.error("Error al actualizar empleado:",a),this.snackBar.open("Error al actualizar empleado.","Cerrar",{duration:3e3,panelClass:["error-snackbar"]})}):this.empleadosService.addTrabajador(r).subscribe(a=>{this.snackBar.open("Empleado agregado exitosamente.","Cerrar",{duration:3e3,panelClass:["success-snackbar"]}),this.resetForm()},a=>{console.error("Error al agregar empleado:",a),this.snackBar.open("Error al agregar empleado.","Cerrar",{duration:3e3,panelClass:["error-snackbar"]})})}else this.snackBar.open("Por favor completa el formulario correctamente.","Cerrar",{duration:3e3,panelClass:["error-snackbar"]})}onDelete(){this.selectedEmployee?this.empleadosService.deleteTrabajador(this.selectedEmployee.idEmpleado).subscribe(o=>{this.snackBar.open("Empleado eliminado exitosamente.","Cerrar",{duration:3e3,panelClass:["success-snackbar"]}),this.resetForm()},o=>{console.error("Error al eliminar empleado:",o),this.snackBar.open("Error al eliminar empleado.","Cerrar",{duration:3e3,panelClass:["error-snackbar"]})}):this.snackBar.open("Selecciona un empleado para eliminar.","Cerrar",{duration:3e3,panelClass:["error-snackbar"]})}resetForm(){this.selectedEmployee=null,this.workerForm.reset(),this.getWorkers()}passwordValidator(o){let r=o.value;if(!r)return null;let a=/[A-Z]/.test(r),c=/[a-z]/.test(r),v=/\d/.test(r),w=/[!@#$%^&*(),.?":{}|<>]/.test(r);return a&&c&&v&&w?null:{weakPassword:!0}}lettersAndSpacesValidator(o){let r=o.value;return r?/^[A-Za-z\s]+$/.test(r)?null:{invalidFormat:!0}:null}};e.\u0275fac=function(r){return new(r||e)(u(V),u(Ve),u(Fe))},e.\u0275cmp=g({type:e,selectors:[["app-addwpage"]],decls:51,vars:14,consts:[["appearance","fill"],[3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"ngSubmit","formGroup"],["matInput","","formControlName","employeeId","readonly",""],["matInput","","formControlName","fullName","required",""],[4,"ngIf"],["matInput","","type","email","formControlName","email","required",""],["matInput","","type","password","formControlName","Contrasena","required",""],["matInput","","formControlName","department","required",""],["matInput","","formControlName","position","required",""],[1,"buttons"],["mat-raised-button","","color","primary","type","submit"],["mat-raised-button","","color","warn","type","button",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","type","button",3,"click"],[3,"value"],["mat-raised-button","","color","warn","type","button",3,"click"]],template:function(r,a){if(r&1&&(n(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),l(3,"Administrar Trabajadores"),t()(),n(4,"mat-card-content")(5,"mat-form-field",0)(6,"mat-label"),l(7,"Seleccionar Trabajador"),t(),n(8,"mat-select",1),d("selectionChange",function(v){return a.onWorkerSelect(v)}),C(9,Ze,2,3,"mat-option",2),t()(),n(10,"form",3),d("ngSubmit",function(){return a.onSubmit()}),n(11,"mat-form-field",0)(12,"mat-label"),l(13,"Clave del Trabajador"),t(),s(14,"input",4),t(),n(15,"mat-form-field",0)(16,"mat-label"),l(17,"Nombre Completo"),t(),s(18,"input",5),C(19,Ke,2,0,"mat-error",6)(20,Qe,2,0,"mat-error",6),t(),n(21,"mat-form-field",0)(22,"mat-label"),l(23,"Correo Electr\xF3nico"),t(),s(24,"input",7),C(25,Xe,2,0,"mat-error",6)(26,Ye,2,0,"mat-error",6),t(),n(27,"mat-form-field",0)(28,"mat-label"),l(29,"Contrase\xF1a"),t(),s(30,"input",8),C(31,et,2,0,"mat-error",6)(32,tt,2,0,"mat-error",6),t(),n(33,"mat-form-field",0)(34,"mat-label"),l(35,"Departamento"),t(),s(36,"input",9),C(37,rt,2,0,"mat-error",6)(38,nt,2,0,"mat-error",6),t(),n(39,"mat-form-field",0)(40,"mat-label"),l(41,"Puesto"),t(),s(42,"input",10),C(43,it,2,0,"mat-error",6)(44,ot,2,0,"mat-error",6),t(),n(45,"div",11)(46,"button",12),l(47),t(),C(48,at,2,0,"button",13),n(49,"button",14),d("click",function(){return a.resetForm()}),l(50," Limpiar "),t()()()()()),r&2){let c,v,w,J,Q,X,Y,ee,te,re;m(9),p("ngForOf",a.workers),m(),p("formGroup",a.workerForm),m(9),p("ngIf",(c=a.workerForm.get("fullName"))==null?null:c.hasError("required")),m(),p("ngIf",(v=a.workerForm.get("fullName"))==null?null:v.hasError("invalidFormat")),m(5),p("ngIf",(w=a.workerForm.get("email"))==null?null:w.hasError("required")),m(),p("ngIf",(J=a.workerForm.get("email"))==null?null:J.hasError("email")),m(5),p("ngIf",(Q=a.workerForm.get("Contrasena"))==null?null:Q.hasError("required")),m(),p("ngIf",(X=a.workerForm.get("Contrasena"))==null?null:X.hasError("weakPassword")),m(5),p("ngIf",(Y=a.workerForm.get("department"))==null?null:Y.hasError("required")),m(),p("ngIf",(ee=a.workerForm.get("department"))==null?null:ee.hasError("invalidFormat")),m(5),p("ngIf",(te=a.workerForm.get("position"))==null?null:te.hasError("required")),m(),p("ngIf",(re=a.workerForm.get("position"))==null?null:re.hasError("invalidFormat")),m(3),R(" ",a.selectedEmployee?"Actualizar":"Agregar"," "),m(),p("ngIf",a.selectedEmployee)}},dependencies:[z,se,ge,_,q,D,H,Pe,A,Me,Ie,O,Te,T,M,I,P,Ce,N,j],styles:["mat-card[_ngcontent-%COMP%]{max-width:600px;margin:20px auto}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px}.container[_ngcontent-%COMP%]{margin-top:20px}.full-width[_ngcontent-%COMP%]{width:100%}.button-container[_ngcontent-%COMP%]{text-align:center;margin-top:20px}"]});let i=e;return i})();var Le=(()=>{let e=class e{constructor(o){this.router=o,this.persona={name:"Juan",image:"https://cdn.pixabay.com/photo/2017/02/23/13/05/avatar-2092113_1280.png",correo:"juanvanessa@gmail.com",telefono:"41181105645",genero:"mujer",pais:"Mexico"}}navigateToRecovery(){this.router.navigate(["admin/changeP"])}};e.\u0275fac=function(r){return new(r||e)(u(y))},e.\u0275cmp=g({type:e,selectors:[["app-perfilpage"]],decls:43,vars:6,consts:[[1,"container"],[2,"background-color","#4d8575","width","95%"],[2,"display","flex","flex-direction","column","align-items","center"],[1,"card-into"],["width","20%","alt","",3,"src"],[1,"data"],[1,"span-label"],["mat-button","",2,"background-color","green",3,"click"]],template:function(r,a){r&1&&(n(0,"body")(1,"div",0)(2,"mat-card",1)(3,"mat-card-header",2)(4,"h1"),l(5,"Perfil"),t()(),n(6,"mat-card-content")(7,"mat-card",3),s(8,"img",4),n(9,"div")(10,"h1"),l(11),t(),s(12,"br"),t(),n(13,"div")(14,"div",5)(15,"span",6),l(16,"Email: "),t(),n(17,"label"),l(18),t()(),s(19,"br"),n(20,"div",5)(21,"span",6),l(22,"Telefono: "),t(),n(23,"label"),l(24),t(),s(25,"br"),t(),s(26,"br"),n(27,"div",5)(28,"span",6),l(29,"Sexo: "),t(),n(30,"label"),l(31),t(),s(32,"br"),t(),s(33,"br"),n(34,"div",5)(35,"span",6),l(36,"Pais: "),t(),n(37,"label"),l(38),t(),s(39,"br"),t()(),s(40,"br"),n(41,"button",7),d("click",function(){return a.navigateToRecovery()}),l(42,"Cambiar contrase\xF1a"),t()()()()()()),r&2&&(m(8),p("src",a.persona.image,ae),m(3),b(a.persona.name),m(7),b(a.persona.correo),m(6),b(a.persona.telefono),m(7),b(a.persona.genero),m(7),b(a.persona.pais))},dependencies:[_,q,D,H],styles:["body[_ngcontent-%COMP%]{margin:10px;align-items:center;display:flex;flex-direction:column}.container[_ngcontent-%COMP%]{margin:10px;align-items:center;display:flex;flex-direction:column;width:70%}.elements[_ngcontent-%COMP%]{display:flex;gap:20px;margin:30px}.card-into[_ngcontent-%COMP%]{padding:10px;border-color:#000;display:flex;flex-direction:column;align-items:center}.span-label[_ngcontent-%COMP%]{height:max-content}.data[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px;border-radius:5px;align-items:center;font-size:1rem;font-weight:700;width:100%}"]});let i=e;return i})();var Ue=(()=>{let e=class e{constructor(o,r){this.formBuilder=o,this.router=r,this.loginForm=this.formBuilder.group({correo:["",f.required],contrasena:["",f.required]})}ngOnInit(){}login(){if(this.loginForm.valid){let o=this.loginForm.get("correo").value,r=this.loginForm.get("contrasena").value}else console.error("Formulario no v\xE1lido")}onSubmit(){this.router.navigate(["/admin/newP"])}};e.\u0275fac=function(r){return new(r||e)(u(V),u(y))},e.\u0275cmp=g({type:e,selectors:[["app-passrecopage"]],decls:10,vars:1,consts:[[1,"container"],[3,"ngSubmit","formGroup"],["matInput","","formControlName","correo","placeholder","Correo electr\xF3nico"],["matInput","","type","password","formControlName","contrasena","placeholder","Contrase\xF1a"],["mat-raised-button","","color","primary","type","submit",3,"click"]],template:function(r,a){r&1&&(n(0,"div",0)(1,"h2"),l(2,"Iniciar sesi\xF3n"),t(),n(3,"form",1),d("ngSubmit",function(){return a.login()}),n(4,"mat-form-field"),s(5,"input",2),t(),n(6,"mat-form-field"),s(7,"input",3),t(),n(8,"button",4),d("click",function(){return a.onSubmit()}),l(9,"Iniciar sesi\xF3n"),t()()()),r&2&&(m(3),p("formGroup",a.loginForm))},dependencies:[_,A,O,T,M,I,P,N,j],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh}.header[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.form[_ngcontent-%COMP%]{width:300px}"]});let i=e;return i})();var Ge=(()=>{let e=class e{constructor(o,r,a){this.formBuilder=o,this.router=r,this.userService=a,this.changePasswordForm=this.formBuilder.group({currentPassword:["",f.required],newPassword:["",[f.required]],confirmPassword:["",f.required]})}ngOnInit(){this.usuario=JSON.parse(sessionStorage.getItem("user")||"{}")}onSubmit(){if(this.changePasswordForm.invalid)return;let{currentPassword:o,newPassword:r,confirmPassword:a}=this.changePasswordForm.value;if(r!==a){alert("Las contrase\xF1as nuevas no coinciden");return}this.changePassword(o,r)}changePassword(o,r){let a=this.usuario?.user;if(!a){alert("No se encontr\xF3 el correo del usuario");return}this.userService.changePassword(a,o,r).subscribe(c=>{console.log("Contrase\xF1a cambiada con \xE9xito",c),this.router.navigate(["/admin/confnp"])},c=>{console.error("Error al cambiar la contrase\xF1a",c),alert("Error al cambiar la contrase\xF1a")})}};e.\u0275fac=function(r){return new(r||e)(u(V),u(y),u(ke))},e.\u0275cmp=g({type:e,selectors:[["app-passnewpage"]],decls:17,vars:4,consts:[[1,"container"],[1,"header"],[1,"form",3,"formGroup"],["matInput","","type","password","formControlName","currentPassword","placeholder","Contrase\xF1a actual"],["matInput","","type","password","formControlName","newPassword","placeholder","Nueva contrase\xF1a"],["matInput","","type","password","formControlName","confirmPassword","placeholder","Confirmar nueva contrase\xF1a"],["mat-raised-button","","color","primary","type","submit",3,"click","disabled"]],template:function(r,a){r&1&&(n(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Cambio de contrase\xF1a"),t(),n(4,"p"),l(5),t(),n(6,"p"),l(7),t()(),n(8,"form",2)(9,"mat-form-field"),s(10,"input",3),t(),n(11,"mat-form-field"),s(12,"input",4),t(),n(13,"mat-form-field"),s(14,"input",5),t(),n(15,"button",6),d("click",function(){return a.onSubmit()}),l(16,"Cambiar contrase\xF1a"),t()()()),r&2&&(m(5),b(a.usuario.nombre),m(2),b(a.usuario.correo),m(),p("formGroup",a.changePasswordForm),m(7),p("disabled",a.changePasswordForm.invalid))},dependencies:[_,A,O,T,M,I,P,N,j],styles:[`.container[_ngcontent-%COMP%] {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh; 

}

.header[_ngcontent-%COMP%] {
  text-align: center;
  margin-bottom: 20px;
}

.form[_ngcontent-%COMP%] {
  width: 300px; 

}`]});let i=e;return i})();var $e=(()=>{let e=class e{constructor(o){this.router=o}goToLogin(){this.router.navigate(["/auth/registro"])}};e.\u0275fac=function(r){return new(r||e)(u(y))},e.\u0275cmp=g({type:e,selectors:[["app-confnw-ppage"]],decls:9,vars:0,consts:[[1,"container"],["mat-raised-button","","color","primary",3,"click"]],template:function(r,a){r&1&&(n(0,"div",0)(1,"mat-card")(2,"mat-card-content")(3,"h2"),l(4,"\xA1Gracias!"),t(),n(5,"p"),l(6,"Tu c\xF3digo ha sido verificado exitosamente."),t(),n(7,"button",1),d("click",function(){return a.goToLogin()}),l(8,"Volver al inicio"),t()()()())},dependencies:[_,q,D],styles:[`body[_ngcontent-%COMP%] {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  background-color: #f0f0f0;
  font-family: Arial, sans-serif;
  margin: 0;
}

.container[_ngcontent-%COMP%] {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

mat-card[_ngcontent-%COMP%] {
  width: 100%;
  max-width: 400px;
  padding: 20px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}`]});let i=e;return i})();var lt=[{path:"",component:je,children:[{path:"registro",component:Be},{path:"perfil",component:Le},{path:"changeP",component:Ue},{path:"newP",component:Ge},{path:"confnp",component:$e},{path:"**",redirectTo:"registro"}]}],Re=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=G({type:e}),e.\u0275inj=U({imports:[K.forChild(lt),K]});let i=e;return i})();var Xt=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=G({type:e}),e.\u0275inj=U({imports:[ce,Re,Ne]});let i=e;return i})();export{Xt as AdminModule};
