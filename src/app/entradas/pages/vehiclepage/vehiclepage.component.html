<div class="container">
  <h1>Vehicle Management</h1>
  <mat-card>
    <form (ngSubmit)="onSubmit(vehicleForm)" #vehicleForm="ngForm">

          <!-- Selector de Usuarios -->
            <mat-form-field >
              <mat-label>Seleccionar Usuario</mat-label>
              <mat-select [(ngModel)]="vehicle.idUsuario" name="idUsuario">
                <mat-option *ngFor="let user of users" [value]="user.idUsuario">
                 {{user.idUsuario}} - {{ user.Nombre }}
                </mat-option>
              </mat-select>
            </mat-form-field>

      <mat-form-field>
        <mat-label>Tipo de Vehículo</mat-label>
        <mat-select [(ngModel)]="vehicle.TipoVehiculo" name="vehicleType" required (selectionChange)="onVehicleTypeChange($event.value)">
          <mat-option value="auto">auto</mat-option>
          <mat-option value="motocicleta">motocicleta</mat-option>
          <mat-option value="bicicleta">bicicleta</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Marca</mat-label>
        <input matInput [(ngModel)]="vehicle.Marca" name="Marca" required>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Modelo</mat-label>
        <input matInput [(ngModel)]="vehicle.Modelo" name="Modelo" required>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Placa</mat-label>
        <input matInput [(ngModel)]="vehicle.Placa" name="Placa">
      </mat-form-field>


      <mat-form-field *ngIf="selectedVehicleType === 'bicicleta'">
        <mat-label>Descripción</mat-label>
        <textarea matInput [(ngModel)]="vehicle.Descripcion" name="description" required></textarea>
      </mat-form-field>
      


      <div class="button-container">
        <button mat-raised-button color="primary" type="submit">{{ editing ? 'Update' : 'Add' }}</button>
      </div>
    </form>
  </mat-card>

  <mat-card>
    <mat-list>
      <mat-list-item *ngFor="let veh of vehicles">
        <div>
          <strong>{{ veh.Placa }}</strong> - {{ veh.Marca }} - {{ veh.Modelo }}
          <button mat-button color="accent" (click)="editVehicle(veh.idVehiculo)">Edit</button>
          <button mat-button color="warn" (click)="deleteVehicle(veh.idVehiculo)">Delete</button>
        </div>
      </mat-list-item>
    </mat-list>
  </mat-card>
</div>
